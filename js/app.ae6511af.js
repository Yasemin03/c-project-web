(function(){"use strict";var e={862:function(e,t,s){var a=s(9242),o=s(3396),r=s(7139);const n={class:"px-3 py-2 text-bg-dark",style:{"background-color":"#ff5b15 !important"}},i={class:"container"},l={class:"d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start"},c=(0,o._)("a",{href:"/",class:"d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none"},[(0,o._)("h3",null,"C-Project")],-1),d={class:"d-flex col-lg-6",style:{"justify-content":"space-between"}},u={class:"form-group"},p={style:{border:"1px solid rgb(92, 92, 178)","border-radius":"5px","margin-right":"10px"},type:"text",class:"form-control",ref:"from",placeholder:"Origin Location",id:"origin"},g={class:"form-group"},h={style:{border:"1px solid rgb(92, 92, 178)","border-radius":"5px"},type:"text",class:"form-control",ref:"to",placeholder:"Destination Location",id:"destination"},m=(0,o.uE)('<ul class="nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small"><li><a href="#" data-bs-toggle="offcanvas" data-bs-target="#yolcuekle" aria-controls="yolcuekle" class="nav-link text-white"><i class="bi bi-plus"></i> Add Passenger </a></li><li><a data-bs-toggle="offcanvas" data-bs-target="#yolculist" aria-controls="yolculist" class="nav-link text-white"><i class="bi bi-clipboard"></i> Passanger List </a></li></ul>',1),f={style:{height:"100%","font-family":"Lucida Sans, sans-serif",margin:"0"}},v={class:"offcanvas offcanvas-size-md offcanvas-start",tabindex:"-1",id:"yolcuekle","aria-labelledby":"yolcuekleLabel"},y=(0,o._)("div",{class:"offcanvas-header"},[(0,o._)("h5",{class:"offcanvas-title",id:"yolcuekleLabel"},"Add Passenger"),(0,o._)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),b={class:"offcanvas-body"},_={class:"container"},w={class:"form-group"},k=(0,o._)("label",{for:"name"},"Passenger Name:",-1),x={class:"form-group"},D=(0,o._)("label",{for:"from"},"From:",-1),P={style:{border:"1px solid rgb(92, 92, 178)","border-radius":"5px"},type:"text",class:"form-control",ref:"pickup",placeholder:"Origin Location",id:"pickup"},M={class:"offcanvas offcanvas-size-l offcanvas-end",tabindex:"-1",id:"yolculist","aria-labelledby":"yolculistLabel"},O=(0,o._)("div",{class:"offcanvas-header"},[(0,o._)("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"}),(0,o._)("h5",{class:"offcanvas-title",id:"yolculistLabel"},"Passenger List")],-1),C={class:"offcanvas-body"},L={class:"container"},S={class:"container-fluid"},j=(0,o._)("hr",null,null,-1),A={id:"passengerTable"},$={class:"table table-bordered"},K=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Passenger Name"),(0,o._)("th",null,"PickUp Address"),(0,o._)("th",null,"Duration"),(0,o._)("th",null,"Order")])],-1),R=(0,o._)("div",{id:"googleMap",style:{width:"100%",height:"calc(100vh - 57px)"}},null,-1),z={style:{position:"absolute",left:"0",bottom:"0",width:"45%","background-color":"white"}},N={style:{display:"flex","justify-content":"space-between",padding:"10px"}};function T(e,t,s,T,U,I){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("header",null,[(0,o._)("div",n,[(0,o._)("div",i,[(0,o._)("div",l,[c,(0,o._)("div",d,[(0,o._)("div",u,[(0,o._)("input",p,null,512)]),(0,o._)("div",g,[(0,o._)("input",h,null,512)]),(0,o._)("button",{class:"btn btn-light",ref:"createRoute",onClick:t[0]||(t[0]=(0,a.iM)((e=>U.routeReady?I.refreshAll():I.calcRoute()),["prevent"]))}," Create Route ",512)]),m])])])]),(0,o._)("div",f,[(0,o._)("div",v,[y,(0,o._)("div",b,[(0,o._)("div",_,[(0,o._)("form",null,[(0,o._)("div",w,[k,(0,o.wy)((0,o._)("input",{style:{border:"1px solid rgb(92, 92, 178)","border-radius":"5px"},type:"text",class:"form-control",ref:"passengerName","onUpdate:modelValue":t[1]||(t[1]=t=>e.passengerName=t),placeholder:"Passenger Name"},null,512),[[a.nr,e.passengerName]])]),(0,o._)("div",x,[D,(0,o._)("input",P,null,512)]),(0,o._)("button",{class:"btn",onClick:t[2]||(t[2]=(0,a.iM)(((...e)=>I.addPassanger&&I.addPassanger(...e)),["prevent"])),style:{border:"1px solid white","border-radius":"10px","background-color":"rgb(31, 87, 210)","font-weight":"bold",color:"white","margin-top":"10px",width:"100%"}}," Add Passenger ")])])])]),(0,o._)("div",M,[O,(0,o._)("div",C,[(0,o._)("div",L,[(0,o._)("div",S,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>U.search=e),placeholder:"Search"},null,512),[[a.nr,U.search]]),j,(0,o._)("div",A,[(0,o._)("table",$,[K,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(U.passengers,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,(0,r.zw)(e.name),1),(0,o._)("td",null,(0,r.zw)(e.address),1),(0,o._)("td",null,(0,r.zw)(new Date(1e3*e.tripDuration.totalDuration).toISOString().slice(11,19)),1),(0,o._)("td",null,(0,r.zw)(e.order),1)])))),128))])])])])])])]),R,(0,o._)("div",z,[(0,o._)("div",N,[(0,o._)("span",null,[(0,o.Uk)("Total Km: "),(0,o._)("span",null,(0,r.zw)(this.totalKm.toFixed(2))+" km",1)]),(0,o._)("span",null,[(0,o.Uk)("Total Duration: "),(0,o._)("span",null,(0,r.zw)(new Date(1e3*this.tripDuration).toISOString().slice(11,19)),1)]),(0,o._)("span",null,[(0,o.Uk)("Total Passengers: "),(0,o._)("span",null,(0,r.zw)(this.passengers.length),1)])])])])],64)}s(7658);var U=s(1528),I={data(){return{passengers:[],pickUps:[],google:null,routeReady:!1,map:null,director:null,mapOptions:{center:{lat:41.015137,lng:28.97953},zoom:10,travelMode:"DRIVING",mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1},origin:null,destination:null,tripDuration:0,totalKm:0,markers:[],currentMarker:null,currentLocation:null,search:"",searchOld:""}},watch:{search:function(e){console.log(e),""!=e&&(this.passengers=this.passengers.filter((t=>t.name.toLowerCase().match(e.toLowerCase())))),""==e&&(this.passengers=this.searchOld)}},methods:{removeAllMarkers(){return new Promise((e=>{for(let t=0;t<this.markers.length;t++){const e=this.markers[t].marker;e.visible=!1,e.setMap(null),this.map.setCenter(this.mapOptions.center)}e(!0)}))},refreshAll(){window.location.reload()},async addPassanger(){if(this.routeReady)if(this.passengers.length>=9)alert("You can add 9 passengers at most!");else if(""!=this.currentLocation){let e=await this.calculateDistances([],this.currentLocation.geometry.location);this.passengers.push({name:this.passengerName,pickupPoint:this.currentLocation.geometry.location,tripDuration:e,order:this.passengers.length+1,address:this.currentLocation.formatted_address}),this.searchOld=this.passengers,this.passengerName="",this.currentMarker=null,this.currentLocation=null,this.$refs.pickup.value="",await this.removeAllMarkers(),this.displayRoute()}else alert("Please fill all fields!");else alert("Please create route first!")},calcRoute(){if(this.passengers.length>=9)return alert("You can add 9 passengers at most!"),"not ok";const e=new this.google.maps.DirectionsService;this.director=new this.google.maps.DirectionsRenderer;const t=this.map;this.director.setMap(t);const s={origin:this.$refs.from.value,destination:this.$refs.to.value,travelMode:this.mapOptions.travelMode};e.route(s,(async(e,t)=>{if("OK"===t){const t=await this.makeCalculation(e.routes[0].legs);t.totalDuration>7200?(await this.removeAllMarkers(),alert("Driving time cannot exceed 2 hours!")):(this.tripDuration=t.totalDuration,this.totalKm=t.totalKm/1e3,this.director.setDirections(e),this.$refs.from.disabled=!0,this.$refs.to.disabled=!0,this.$refs.createRoute.innerText="Refresh",this.routeReady=!0)}else console.log("Directions request failed due to "+t)}))},makeCalculation(e){return new Promise((t=>{let s=0,a=0;e.forEach((e=>{a+=e.duration.value,s+=e.distance.value})),t({totalKm:s,totalDuration:a})}))},calculateDistances(e,t){return new Promise(((s,a)=>{const o=new this.google.maps.DirectionsService,r={origin:t,destination:this.destination,waypoints:e,optimizeWaypoints:!0,travelMode:this.mapOptions.travelMode};o.route(r,(async(e,t)=>{"OK"===t?s(await this.makeCalculation(e.routes[0].legs)):(console.log("Directions request failed due to "+t),a(t))}))}))},async displayRoute(){const e=this.map;let t=this.passengers.map((e=>({location:e.address,stopover:!0})));console.log(t);let s=await this.calculateDistances(t,this.origin);this.totalKm=s.totalKm/1e3,this.tripDuration=s.totalDuration;const a=[];for(let n=0;n<this.passengers.length;n++)a.push({location:this.passengers[n].address,stopover:!0});const o=new this.google.maps.DirectionsService;this.director.setMap(null);const r={origin:this.origin,destination:this.destination,waypoints:a,optimizeWaypoints:!0,travelMode:this.mapOptions.travelMode};console.log(r),o.route(r,((t,s)=>{console.log(t,s),"OK"===s?(this.director.setMap(e),this.director.setDirections(t)):console.log("Directions request failed due to "+s)}))},async geocodeAddress(e,t){return new Promise(((s,a)=>{e.geocode({address:t},((e,t)=>{"OK"===t?s(e[0].geometry.location):a(t)}))}))}},mounted(){const e=new U.aN({apiKey:"AIzaSyBTsiAJPDg62Y7SHDMs963UeWmRQNQxrPw",version:"weekly",libraries:["places"]});e.load().then((e=>{this.google=e;const t=new e.maps.Map(document.getElementById("googleMap"),this.mapOptions);this.map=t;const s=new e.maps.places.Autocomplete(this.$refs.from),a=new e.maps.places.Autocomplete(this.$refs.to),o=new e.maps.places.Autocomplete(this.$refs.pickup);s.setFields(["place_id","geometry"]),a.setFields(["place_id","geometry"]),e.maps.event.addListener(s,"place_changed",(()=>{const a=s.getPlace();let o=this.markers.find((e=>"origin"===e.name));if(o)o.marker.setPosition(a.geometry.location);else{var r=new e.maps.Marker({position:a.geometry.location,map:t,id:"origin"});this.markers.push({marker:r,name:"origin"})}t.setZoom(10),t.setCenter(a.geometry.location);let n=a.geometry.location.lat().toString(),i=a.geometry.location.lng().toString();this.origin=`${n},${i}`})),e.maps.event.addListener(a,"place_changed",(()=>{const s=a.getPlace();let o=this.markers.find((e=>"destination"===e.name));if(o)o.marker.setPosition(s.geometry.location);else{var r=new e.maps.Marker({position:s.geometry.location,map:t,id:"destination"});this.markers.push({marker:r,name:"destination"})}t.setZoom(10),t.setCenter(s.geometry.location);let n=s.geometry.location.lat().toString(),i=s.geometry.location.lng().toString();this.destination=`${n},${i}`})),e.maps.event.addListener(o,"place_changed",(async()=>{const s=o.getPlace(),a=this.passengers.map((e=>({location:e.address,stopover:!0})));a.push({location:s.formatted_address,stopover:!0}),console.log(888,a);const r=await this.calculateDistances(a,this.origin);console.log(888),r.totalDuration>7200?(alert("Driving time cannot exceed 2 hours!"),this.$refs.pickup.value=""):(null!=this.currentMarker?this.currentMarker.setPosition(s.geometry.location):(this.currentMarker=new e.maps.Marker({position:s.geometry.location,map:t,id:"passenger",labelContent:"<div class='arrow'></div><div class='inner'>$425K</div>",labelAnchor:new e.maps.Point(0,0),labelClass:"labels"}),this.markers.push({name:"passenger",marker:this.currentMarker})),t.setZoom(10),t.setCenter(s.geometry.location),this.currentLocation=s,this.passengerName=this.$refs.passengerName.value)}))}))}},F=s(89);const Y=(0,F.Z)(I,[["render",T]]);var E=Y;s(806),s(7154);(0,a.ri)(E).mount("#app")}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,a,o,r){if(!a){var n=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],r=e[d][2];for(var i=!0,l=0;l<a.length;l++)(!1&r||n>=r)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(i=!1,r<n&&(n=r));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,o,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,n=a[0],i=a[1],l=a[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var d=l(s)}for(t&&t(a);c<n.length;c++)r=n[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},a=self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(862)}));a=s.O(a)})();
//# sourceMappingURL=app.ae6511af.js.map